
import os
from aiogram import Bot, Dispatcher, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.utils import executor
from collections import Counter

API_TOKEN = os.getenv("BOT_TOKEN")

bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

user_data = {}

@dp.message_handler(commands=["start"])
async def start_handler(message: types.Message):
    keyboard = ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add(KeyboardButton("üöÄ –ù–∞—á–∞—Ç—å"))
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî –ü–ª—ë–Ω–∫–∞ –°—É–¥—å–±—ã, –º–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏. –ì–æ—Ç–æ–≤ –≤—ã—è—Å–Ω–∏—Ç—å, –∫–µ–º —Ç—ã –±—ã–ª(–∞) –±—ã –≤ XX –≤–µ–∫–µ?", reply_markup=keyboard)

@dp.message_handler(lambda message: message.text == "üöÄ –ù–∞—á–∞—Ç—å")
async def begin_quiz(message: types.Message):
    user_data[message.from_user.id] = {"step": 0, "answers": []}
    await send_question(message.chat.id, 0)


questions = [
    {
        "text": "–¢—ã —Å–∫–æ—Ä–µ–µ...",
        "options": [
            {"emoji": "üîß", "text": "–õ—é–±–ª—é –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –∏ —á–∏–Ω–∏—Ç—å", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üí¨", "text": "–û–±—â–∞—é—Å—å —Å –ª—é–¥—å–º–∏ –∏ —Ä—É–∫–æ–≤–æ–∂—É", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üé≠", "text": "–ú–µ—á—Ç–∞—é –∏ —Å–æ–∑–¥–∞—é –∏—Å–∫—É—Å—Å—Ç–≤–æ", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üí™", "text": "–†–∞–±–æ—Ç–∞—é —Ä—É–∫–∞–º–∏, –º–Ω–µ –Ω–µ —Å—Ç—Ä–∞—à–µ–Ω —Ç—Ä—É–¥", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —Ä–∏—Å–∫—É?",
        "options": [
            {"emoji": "üòå", "text": "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üí•", "text": "–õ—é–±–ª—é, –∫–æ–≥–¥–∞ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω –∫–∏–ø–∏—Ç", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üß†", "text": "–ì–ª–∞–≤–Ω–æ–µ ‚Äî –∏–Ω—Ç–µ—Ä–µ—Å, —Ä–∏—Å–∫ –ø—É—Å—Ç—å –±—É–¥–µ—Ç", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üöú", "text": "–ú–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ, —Ä–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ –¥–µ–ª–æ", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–ö–∞–∫–∞—è —Å—Ü–µ–Ω–∞ —Ç–µ–±–µ –±–ª–∏–∂–µ?",
        "options": [
            {"emoji": "üé§", "text": "–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–æ–π", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üß™", "text": "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üëÆ", "text": "–ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ –¥—É—Ö–µ '–ø–æ—Ä—è–¥–æ–∫ –±—É–¥–µ—Ç!'", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üë∑", "text": "–†–∞–±–æ—Ç–∞ –≤ —Ü–µ—Ö—É —É —Å—Ç–∞–Ω–∫–∞", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–ß—Ç–æ –±—ã —Ç—ã –≤–∑—è–ª(–∞) —Å —Å–æ–±–æ–π –≤ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫—É –≤ 1965?",
        "options": [
            {"emoji": "üìï", "text": "–ó–∞–ø–∏—Å–Ω—É—é –∫–Ω–∏–∂–∫—É –∏ –ø–µ—Ä–æ", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üì∑", "text": "–ü–ª—ë–Ω–∫—É, —á—Ç–æ–±—ã —Å–Ω–∏–º–∞—Ç—å —Ö—Ä–æ–Ω–∏–∫—É", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üî¨", "text": "–ú–∏–Ω–∏-–º–∏–∫—Ä–æ—Å–∫–æ–ø ‚Äî –º–∞–ª–æ –ª–∏", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "ü•æ", "text": "–ö–∏—Ä–∑–æ–≤—ã–µ —Å–∞–ø–æ–≥–∏, –≤–¥—Ä—É–≥ —Å—Ç—Ä–æ–π–∫–∞", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–í—ã–±–µ—Ä–∏ –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ:",
        "options": [
            {"emoji": "üè≠", "text": "–ó–∞–≤–æ–¥ —Å –≥—É–ª–æ–º —Å—Ç–∞–Ω–∫–æ–≤", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üìö", "text": "–ö–∞–±–∏–Ω–µ—Ç —Å –∫–Ω–∏–≥–∞–º–∏ –∏ –±—É–º–∞–≥–∞–º–∏", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üé¨", "text": "–°—ä—ë–º–æ—á–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –∏–ª–∏ —Å—Ü–µ–Ω–∞", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "‚úàÔ∏è", "text": "–ö–∞–±–∏–Ω–∞ –ø–∏–ª–æ—Ç–∞ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–Ω—ã–π –ø—É–Ω–∫—Ç", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"}
        ]
    },
    {
        "text": "–¢—ã –ø–æ–ª—É—á–∏–ª(–∞) —Å—Ä–æ—á–Ω—É—é —Ç–µ–ª–µ–≥—Ä–∞–º–º—É –∏–∑ –¶–ö. –¢–≤–æ—è —Ä–µ–∞–∫—Ü–∏—è?",
        "options": [
            {"emoji": "üì¨", "text": "–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –¥–æ–∫–ª–∞–¥—ã–≤–∞—é –Ω–∞—á–∞–ª—å—Å—Ç–≤—É", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üß™", "text": "–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–∞–Ω–Ω—ã–µ", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "‚úçÔ∏è", "text": "–ü—Ä–µ–≤—Ä–∞—â–∞—é –≤ —Å—Ü–µ–Ω–∞—Ä–∏–π", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "ü§∑‚Äç‚ôÇÔ∏è", "text": "–°–Ω–∞—á–∞–ª–∞ –¥–æ–¥–µ–ª–∞—é —Å–º–µ–Ω—É", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–í—ã–±—Ä–æ—Å–∏–ª–∏ —Ç—Ä–æ—Ñ–µ–π–Ω—ã–π –º–∞–≥–Ω–∏—Ç–æ—Ñ–æ–Ω. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?",
        "options": [
            {"emoji": "üîß", "text": "–ü–æ—á–∏–Ω—é!", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üé§", "text": "–ò—Å–ø–æ–ª—å–∑—É—é –≤ –ø—å–µ—Å–µ", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üìª", "text": "–û—Ç–¥–∞–º –Ω–∞ –∑–∞–≤–æ–¥", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üìö", "text": "–ü–æ–∏—â—É –∏–Ω—Ñ—É ‚Äî –º–æ–∂–µ—Ç, –æ–Ω —à–ø–∏–æ–Ω—Å–∫–∏–π", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"}
        ]
    },
    {
        "text": "–¢–µ–±–µ –¥–∞–ª–∏ –ø—Ä–µ–¥–º–µ—Ç: —Å–ª–∞–π–¥–æ—Å–∫–æ–ø. –ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å?",
        "options": [
            {"emoji": "üîç", "text": "–ú–æ–∂–Ω–æ –∏–∑—É—á–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üì∏", "text": "–î–ª—è –¥–æ–º–∞—à–Ω–µ–π –ª–µ–∫—Ü–∏–∏", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üñº", "text": "–ß–∞—Å—Ç—å —Å—Ü–µ–Ω–æ–≥—Ä–∞—Ñ–∏–∏", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "‚ùì", "text": "–ö—Ä—É—á—É –∏ –≤–µ—Ä—á—É", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–ö—É–¥–∞ –ø–æ–µ–¥–µ—à—å –≤ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫—É?",
        "options": [
            {"emoji": "üöÇ", "text": "–ù–∞ –ë–ê–ú", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üé≠", "text": "–í –ü–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üß™", "text": "–í –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üß±", "text": "–ù–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–ª–∞", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"}
        ]
    },
    {
        "text": "–¢—ã –æ–∫–∞–∑–∞–ª—Å—è(–ª–∞—Å—å) –≤ 1943. –ß—Ç–æ –¥–µ–ª–∞–µ—à—å?",
        "options": [
            {"emoji": "‚öîÔ∏è", "text": "–ò–¥—É –Ω–∞ —Ñ—Ä–æ–Ω—Ç", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üî¨", "text": "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Ö–Ω–∏–∫–∏", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üì£", "text": "–ü–æ–¥–Ω–∏–º–∞—é –º–æ—Ä–∞–ª—å", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üöë", "text": "–†–∞–±–æ—Ç–∞—é –≤ –º–µ–¥—Å–∞–Ω–±–∞—Ç–µ", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–ß—Ç–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç–µ?",
        "options": [
            {"emoji": "üêå", "text": "–ë—é—Ä–æ–∫—Ä–∞—Ç–∏—è", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üì¢", "text": "–ö–æ–≥–¥–∞ –Ω–µ —Å–ª—É—à–∞—é—Ç", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üìâ", "text": "–ù–µ—Ç —Å–º—ã—Å–ª–∞ –≤ —Ä–∞–±–æ—Ç–µ", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üö´", "text": "–ù–µ –¥–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ä—É–∫–∞–º–∏", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    },
    {
        "text": "–¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç?",
        "options": [
            {"emoji": "‚úèÔ∏è", "text": "–ö–∞—Ä–∞–Ω–¥–∞—à –∏ –±–ª–æ–∫–Ω–æ—Ç", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üîß", "text": "–ì–∞–µ—á–Ω—ã–π –∫–ª—é—á", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üì¢", "text": "–ú–∏–∫—Ä–æ—Ñ–æ–Ω", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üë©‚Äçüî¨", "text": "–ü—Ä–æ–±–∏—Ä–∫–∞", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"}
        ]
    },
    {
        "text": "–ß—Ç–æ –±—ã —Ç—ã –ø–æ–≤–µ—Å–∏–ª(–∞) —É —Å–µ–±—è –Ω–∞ —Å—Ç–µ–Ω–µ?",
        "options": [
            {"emoji": "üèÖ", "text": "–ì–µ—Ä–æ–µ–≤ —Ç—Ä—É–¥–∞", "value": "—Ä–∞–±–æ—á–∏–π"},
            {"emoji": "üé≠", "text": "–ê—Ñ–∏—à—É —Å–ø–µ–∫—Ç–∞–∫–ª—è", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üß¨", "text": "–°—Ö–µ–º—É –º–æ–ª–µ–∫—É–ª—ã", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üìú", "text": "–¶–∏—Ç–∞—Ç—É –õ–µ–Ω–∏–Ω–∞ –∏–ª–∏ –ì–∞–≥–∞—Ä–∏–Ω–∞", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"}
        ]
    },
    {
        "text": "–ö–æ–≥–¥–∞ —Å–ª—ã—à–∏—à—å ¬´–±—É–¥—É—â–µ–µ¬ª, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å...",
        "options": [
            {"emoji": "üöÄ", "text": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∫–æ—Å–º–æ—Å", "value": "—Ç–µ—Ö–Ω–∞—Ä—å"},
            {"emoji": "üìñ", "text": "–û–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã—Ö –ª—é–¥–µ–π", "value": "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å"},
            {"emoji": "üéº", "text": "–ò—Å–∫—É—Å—Å—Ç–≤–æ –∏ —Å–≤–æ–±–æ–¥—É", "value": "—Ç–≤–æ—Ä–µ—Ü"},
            {"emoji": "üî®", "text": "–¢—Ä—É–¥ –∏ —Å—Ç—Ä–æ–π–∫–∏", "value": "—Ä–∞–±–æ—á–∏–π"}
        ]
    }
]

# –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ
